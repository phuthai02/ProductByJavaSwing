/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Main;

import DAO.BanChoDAO;
import DAO.BanDAO;
import DAO.BanDatDAO;
import DAO.KhachHangDao;
import DAO.LoaiSanPhamDAO;
import DAO.NhanVienDAO;
import DAO.SanPhamDAO;
import Entity.Ban;
import Entity.BanCho;
import Entity.BanDat;
import Entity.KhachHang;
import Entity.LoaiSp;
import Entity.SanPham;
import Untils.Auth;
import Untils.MsgBox;
import Untils.Xcurrency;
import Untils.Xdate;
import java.awt.Color;
import java.awt.Component;
import java.util.Date;

import java.util.List;
import javax.swing.BorderFactory;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JLabel;
import javax.swing.Timer;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author doanp
 */
public class QuanLyBanFrame extends javax.swing.JFrame {

    /**
     * Creates new form QuanLyBanFrame
     */
    DefaultComboBoxModel modelCbo;
    BanDAO daoBan;
    int pageIndexTB;
    List<LoaiSp> lstLSP;
    DefaultTableModel modelSP;
    DefaultTableModel modelDS;
    DefaultTableModel modelDB;
    DefaultTableModel modelQL;
    DefaultTableModel modelLT;
    boolean huyMon;
    boolean checkSave;
    List<Ban> lstALL;
    List<BanDat> lstDB;
    boolean clickdatBan = false;

    public QuanLyBanFrame() {
        initComponents();
        init();
        Auth.user = new NhanVienDAO().selectById("NV01");
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        buttonGroup2 = new javax.swing.ButtonGroup();
        buttonGroup3 = new javax.swing.ButtonGroup();
        tabs = new javax.swing.JTabbedPane();
        jPanel1 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        txtTimKiem = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        cboTang = new javax.swing.JComboBox<>();
        jLabel3 = new javax.swing.JLabel();
        rdoALL = new javax.swing.JRadioButton();
        rdoTrong = new javax.swing.JRadioButton();
        rdoCoKhach = new javax.swing.JRadioButton();
        btnPre = new javax.swing.JButton();
        btnNext = new javax.swing.JButton();
        lbTable = new javax.swing.JLabel();
        btnXacNhan = new javax.swing.JButton();
        btnHuy = new javax.swing.JButton();
        pnlBan = new javax.swing.JPanel();
        btn1 = new javax.swing.JLabel();
        btn2 = new javax.swing.JLabel();
        btn3 = new javax.swing.JLabel();
        btn4 = new javax.swing.JLabel();
        btn5 = new javax.swing.JLabel();
        btn6 = new javax.swing.JLabel();
        btn7 = new javax.swing.JLabel();
        btn8 = new javax.swing.JLabel();
        btn9 = new javax.swing.JLabel();
        btn10 = new javax.swing.JLabel();
        btn11 = new javax.swing.JLabel();
        btn12 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jLabel4 = new javax.swing.JLabel();
        cboLoai = new javax.swing.JComboBox<>();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblSP = new javax.swing.JTable();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        txtTimKiemTT = new javax.swing.JTextField();
        jScrollPane2 = new javax.swing.JScrollPane();
        tblDS = new javax.swing.JTable();
        lblMaBan = new javax.swing.JLabel();
        btnThemVao = new javax.swing.JButton();
        btnLuuLai = new javax.swing.JButton();
        btnHuyMon = new javax.swing.JButton();
        btnSoLuong = new javax.swing.JButton();
        btnThanhToan = new javax.swing.JButton();
        btnHoanThanh = new javax.swing.JButton();
        btnChuyenBan = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        jScrollPane3 = new javax.swing.JScrollPane();
        tblDB = new javax.swing.JTable();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        txtTimBanDat = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        cboBan = new javax.swing.JComboBox<>();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        rdoNam = new javax.swing.JRadioButton();
        rdoNu = new javax.swing.JRadioButton();
        txtNgaySinh = new com.toedter.calendar.JDateChooser();
        txtEmail = new javax.swing.JTextField();
        txtSDT = new javax.swing.JTextField();
        txtTen = new javax.swing.JTextField();
        btnThemMoi = new javax.swing.JButton();
        btnKT = new javax.swing.JButton();
        jSeparator1 = new javax.swing.JSeparator();
        jLabel16 = new javax.swing.JLabel();
        txtNgaydat = new com.toedter.calendar.JDateChooser();
        jLabel17 = new javax.swing.JLabel();
        cboGio = new javax.swing.JComboBox<>();
        cboPhut = new javax.swing.JComboBox<>();
        jLabel18 = new javax.swing.JLabel();
        jLabel19 = new javax.swing.JLabel();
        btnHuyChon = new javax.swing.JButton();
        jLabel20 = new javax.swing.JLabel();
        cboTangDB = new javax.swing.JComboBox<>();
        jSeparator2 = new javax.swing.JSeparator();
        btnDatLich = new javax.swing.JButton();
        btnHuyLich = new javax.swing.JButton();
        btnThayDoiLich = new javax.swing.JButton();
        jPanel5 = new javax.swing.JPanel();
        cboTangQL = new javax.swing.JComboBox<>();
        jLabel21 = new javax.swing.JLabel();
        jLabel22 = new javax.swing.JLabel();
        jScrollPane5 = new javax.swing.JScrollPane();
        tblQL = new javax.swing.JTable();
        jLabel23 = new javax.swing.JLabel();
        jLabel24 = new javax.swing.JLabel();
        txtMaBan = new javax.swing.JTextField();
        jLabel25 = new javax.swing.JLabel();
        txtTenBan = new javax.swing.JTextField();
        jLabel26 = new javax.swing.JLabel();
        txtTang = new javax.swing.JSpinner();
        jSeparator3 = new javax.swing.JSeparator();
        btnThemBan = new javax.swing.JButton();
        btnSuaBan = new javax.swing.JButton();
        btnXoaBan = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel4.setBackground(new java.awt.Color(255, 217, 102));

        jLabel1.setText("Tìm kiếm:");

        txtTimKiem.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtTimKiemKeyReleased(evt);
            }
        });

        jLabel2.setText("Tầng");

        cboTang.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        cboTang.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboTangItemStateChanged(evt);
            }
        });

        jLabel3.setText("Trạng thái:");

        buttonGroup1.add(rdoALL);
        rdoALL.setSelected(true);
        rdoALL.setText("Tất cả");
        rdoALL.setOpaque(false);
        rdoALL.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                rdoALLMouseClicked(evt);
            }
        });

        buttonGroup1.add(rdoTrong);
        rdoTrong.setText("Còn trống");
        rdoTrong.setOpaque(false);
        rdoTrong.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                rdoTrongMouseClicked(evt);
            }
        });

        buttonGroup1.add(rdoCoKhach);
        rdoCoKhach.setText("Có khách");
        rdoCoKhach.setOpaque(false);
        rdoCoKhach.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                rdoCoKhachMouseClicked(evt);
            }
        });

        btnPre.setText("<<");
        btnPre.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPreActionPerformed(evt);
            }
        });

        btnNext.setText(">>");
        btnNext.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNextActionPerformed(evt);
            }
        });

        lbTable.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        lbTable.setText("1");

        btnXacNhan.setText("Chuyển bàn");
        btnXacNhan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnXacNhanActionPerformed(evt);
            }
        });

        btnHuy.setText("Hủy");
        btnHuy.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnHuyActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
        jPanel4.setLayout(jPanel4Layout);
        jPanel4Layout.setHorizontalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtTimKiem)
                            .addComponent(cboTang, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(jPanel4Layout.createSequentialGroup()
                                .addComponent(btnPre)
                                .addGap(33, 33, 33)
                                .addComponent(lbTable)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 37, Short.MAX_VALUE)
                                .addComponent(btnNext))
                            .addGroup(jPanel4Layout.createSequentialGroup()
                                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel1)
                                    .addComponent(rdoCoKhach)
                                    .addComponent(rdoTrong)
                                    .addComponent(rdoALL)
                                    .addComponent(jLabel2)
                                    .addComponent(jLabel3))
                                .addGap(0, 0, Short.MAX_VALUE))))
                    .addGroup(jPanel4Layout.createSequentialGroup()
                        .addGap(50, 50, 50)
                        .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(btnHuy, javax.swing.GroupLayout.PREFERRED_SIZE, 91, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnXacNhan))
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jPanel4Layout.setVerticalGroup(
            jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel4Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(txtTimKiem, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jLabel2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(cboTang, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jLabel3)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(rdoALL)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(rdoTrong)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(rdoCoKhach)
                .addGap(18, 18, 18)
                .addGroup(jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnPre)
                    .addComponent(lbTable)
                    .addComponent(btnNext))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(btnXacNhan)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(btnHuy)
                .addContainerGap())
        );

        pnlBan.setLayout(new java.awt.GridLayout(3, 4, 10, 10));

        btn1.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/ship.png"))); // NOI18N
        btn1.setText("Mang về");
        btn1.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn1.setOpaque(true);
        btn1.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn1MouseClicked(evt);
            }
        });
        pnlBan.add(btn1);

        btn2.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn2.setText("Bàn X");
        btn2.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn2.setOpaque(true);
        btn2.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn2.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn2MouseClicked(evt);
            }
        });
        pnlBan.add(btn2);

        btn3.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn3.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn3.setText("Bàn X");
        btn3.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn3.setOpaque(true);
        btn3.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn3.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn3MouseClicked(evt);
            }
        });
        pnlBan.add(btn3);

        btn4.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn4.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn4.setText("Bàn X");
        btn4.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn4.setOpaque(true);
        btn4.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn4.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn4MouseClicked(evt);
            }
        });
        pnlBan.add(btn4);

        btn5.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn5.setText("Bàn X");
        btn5.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn5.setOpaque(true);
        btn5.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn5.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn5MouseClicked(evt);
            }
        });
        pnlBan.add(btn5);

        btn6.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn6.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn6.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn6.setText("Bàn X");
        btn6.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn6.setOpaque(true);
        btn6.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn6.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn6MouseClicked(evt);
            }
        });
        pnlBan.add(btn6);

        btn7.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn7.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn7.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn7.setText("Bàn X");
        btn7.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn7.setOpaque(true);
        btn7.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn7.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn7MouseClicked(evt);
            }
        });
        pnlBan.add(btn7);

        btn8.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn8.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn8.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn8.setText("Bàn X");
        btn8.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn8.setOpaque(true);
        btn8.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn8.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn8MouseClicked(evt);
            }
        });
        pnlBan.add(btn8);

        btn9.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn9.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn9.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn9.setText("Bàn X");
        btn9.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn9.setOpaque(true);
        btn9.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn9.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn9MouseClicked(evt);
            }
        });
        pnlBan.add(btn9);

        btn10.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn10.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn10.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn10.setText("Bàn X");
        btn10.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn10.setOpaque(true);
        btn10.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn10.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn10MouseClicked(evt);
            }
        });
        pnlBan.add(btn10);

        btn11.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn11.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn11.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn11.setText("Bàn X");
        btn11.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn11.setOpaque(true);
        btn11.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn11.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn11MouseClicked(evt);
            }
        });
        pnlBan.add(btn11);

        btn12.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btn12.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        btn12.setIcon(new javax.swing.ImageIcon(getClass().getResource("/icon/table.png"))); // NOI18N
        btn12.setText("Bàn X");
        btn12.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btn12.setOpaque(true);
        btn12.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btn12.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                btn12MouseClicked(evt);
            }
        });
        pnlBan.add(btn12);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(pnlBan, javax.swing.GroupLayout.DEFAULT_SIZE, 875, Short.MAX_VALUE)
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addComponent(pnlBan, javax.swing.GroupLayout.DEFAULT_SIZE, 576, Short.MAX_VALUE)
                .addContainerGap())
        );

        tabs.addTab("Danh sách bàn", jPanel1);

        jLabel4.setText("Loại sản phẩm:");

        cboLoai.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        cboLoai.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboLoaiItemStateChanged(evt);
            }
        });

        tblSP.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane1.setViewportView(tblSP);

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel5.setForeground(new java.awt.Color(0, 51, 153));
        jLabel5.setText("DANH SÁCH SẢN PHẨM MÃ BÀN:");

        jLabel6.setText("Tìm kiếm");

        txtTimKiemTT.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtTimKiemTTKeyReleased(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                txtTimKiemTTKeyTyped(evt);
            }
        });

        tblDS.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane2.setViewportView(tblDS);

        lblMaBan.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        lblMaBan.setForeground(new java.awt.Color(255, 0, 51));
        lblMaBan.setText("CHƯA CHỌN BÀN");

        btnThemVao.setText("Thêm vào");
        btnThemVao.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThemVaoActionPerformed(evt);
            }
        });

        btnLuuLai.setText("Lưu lại");
        btnLuuLai.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLuuLaiActionPerformed(evt);
            }
        });

        btnHuyMon.setText("Hủy món");
        btnHuyMon.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnHuyMonActionPerformed(evt);
            }
        });

        btnSoLuong.setText("Chỉnh sửa số lượng");
        btnSoLuong.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSoLuongActionPerformed(evt);
            }
        });

        btnThanhToan.setText("Thanh toán");
        btnThanhToan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThanhToanActionPerformed(evt);
            }
        });

        btnHoanThanh.setText("Hoàn thành");
        btnHoanThanh.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnHoanThanhActionPerformed(evt);
            }
        });

        btnChuyenBan.setText("Chuyển bàn");
        btnChuyenBan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnChuyenBanActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel4)
                            .addComponent(cboLoai, javax.swing.GroupLayout.PREFERRED_SIZE, 158, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel6)
                            .addComponent(txtTimKiemTT)))
                    .addComponent(btnThemVao)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 357, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(jLabel5)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(lblMaBan)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(jPanel2Layout.createSequentialGroup()
                        .addComponent(btnHuyMon)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnSoLuong, javax.swing.GroupLayout.PREFERRED_SIZE, 125, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnHoanThanh)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 127, Short.MAX_VALUE)
                        .addComponent(btnChuyenBan)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnLuuLai)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnThanhToan))
                    .addComponent(jScrollPane1))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(jLabel6))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(cboLoai, javax.swing.GroupLayout.DEFAULT_SIZE, 28, Short.MAX_VALUE)
                    .addComponent(txtTimKiemTT)
                    .addComponent(jLabel5)
                    .addComponent(lblMaBan))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 468, Short.MAX_VALUE)
                    .addComponent(jScrollPane1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnThemVao)
                    .addComponent(btnHuyMon)
                    .addComponent(btnSoLuong)
                    .addComponent(btnThanhToan)
                    .addComponent(btnLuuLai)
                    .addComponent(btnHoanThanh)
                    .addComponent(btnChuyenBan))
                .addGap(14, 14, 14))
        );

        jPanel2Layout.linkSize(javax.swing.SwingConstants.VERTICAL, new java.awt.Component[] {cboLoai, txtTimKiemTT});

        tabs.addTab("Thông tin bàn", jPanel2);

        tblDB.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tblDB.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblDBMouseClicked(evt);
            }
        });
        jScrollPane3.setViewportView(tblDB);

        jLabel7.setFont(new java.awt.Font("Tahoma", 1, 36)); // NOI18N
        jLabel7.setForeground(new java.awt.Color(0, 51, 153));
        jLabel7.setText("ĐẶT BÀN");

        jLabel8.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel8.setText("Tìm kiếm lịch đặt:");

        txtTimBanDat.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                txtTimBanDatKeyReleased(evt);
            }
        });

        jLabel9.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel9.setForeground(new java.awt.Color(0, 51, 153));
        jLabel9.setText("Lịch đặt bàn:");

        jLabel10.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel10.setText("Bàn muốn đặt:");
        jLabel10.setToolTipText("");

        cboBan.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        jLabel11.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel11.setText("Tên khách hàng:");

        jLabel12.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel12.setText("Số điện thoại:");

        jLabel13.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel13.setText("Email:");

        jLabel14.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel14.setText("Ngày sinh:");

        jLabel15.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel15.setText("Giới tính:");

        buttonGroup3.add(rdoNam);
        rdoNam.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        rdoNam.setText("Nam");

        buttonGroup3.add(rdoNu);
        rdoNu.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        rdoNu.setText("Nữ");

        txtNgaySinh.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N

        txtEmail.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N

        txtSDT.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N

        txtTen.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N

        btnThemMoi.setText("Thêm mới");
        btnThemMoi.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThemMoiActionPerformed(evt);
            }
        });

        btnKT.setText("Kiểm tra");
        btnKT.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnKTActionPerformed(evt);
            }
        });

        jLabel16.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel16.setText("Ngày đặt:");

        txtNgaydat.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N

        jLabel17.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel17.setText("Giờ đặt:");

        cboGio.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        cboPhut.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        jLabel18.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel18.setText(":");

        jLabel19.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel19.setText("phút");

        btnHuyChon.setText("Hủy chọn");
        btnHuyChon.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnHuyChonActionPerformed(evt);
            }
        });

        jLabel20.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel20.setText("Tầng:");
        jLabel20.setToolTipText("");

        cboTangDB.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        cboTangDB.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboTangDBItemStateChanged(evt);
            }
        });

        btnDatLich.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btnDatLich.setText("Đặt lịch");
        btnDatLich.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDatLichActionPerformed(evt);
            }
        });

        btnHuyLich.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btnHuyLich.setText("Hủy lịch đặt");
        btnHuyLich.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnHuyLichActionPerformed(evt);
            }
        });

        btnThayDoiLich.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btnThayDoiLich.setText("Thay đổi lịch");
        btnThayDoiLich.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThayDoiLichActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addComponent(jLabel8)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(txtTimBanDat, javax.swing.GroupLayout.PREFERRED_SIZE, 336, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jLabel9))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jSeparator1)
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(jLabel12)
                                            .addComponent(jLabel11)
                                            .addComponent(jLabel13)
                                            .addComponent(jLabel14)
                                            .addComponent(jLabel15))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(jPanel3Layout.createSequentialGroup()
                                                .addComponent(rdoNam)
                                                .addGap(18, 18, 18)
                                                .addComponent(rdoNu))
                                            .addGroup(jPanel3Layout.createSequentialGroup()
                                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                                    .addComponent(txtNgaySinh, javax.swing.GroupLayout.DEFAULT_SIZE, 401, Short.MAX_VALUE)
                                                    .addComponent(txtEmail, javax.swing.GroupLayout.Alignment.LEADING)
                                                    .addComponent(txtTen, javax.swing.GroupLayout.Alignment.LEADING)
                                                    .addComponent(txtSDT, javax.swing.GroupLayout.Alignment.LEADING))
                                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                    .addGroup(jPanel3Layout.createSequentialGroup()
                                                        .addGap(20, 20, 20)
                                                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                            .addComponent(btnThemMoi, javax.swing.GroupLayout.Alignment.TRAILING)
                                                            .addComponent(btnKT, javax.swing.GroupLayout.Alignment.TRAILING)))
                                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                        .addComponent(btnHuyChon)))))
                                        .addGap(0, 0, Short.MAX_VALUE)))
                                .addGap(10, 10, 10))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel17, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(jPanel3Layout.createSequentialGroup()
                                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(jLabel10)
                                            .addComponent(jLabel16)
                                            .addComponent(jLabel20))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(cboTangDB, javax.swing.GroupLayout.PREFERRED_SIZE, 411, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(cboBan, javax.swing.GroupLayout.PREFERRED_SIZE, 411, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addGroup(jPanel3Layout.createSequentialGroup()
                                                .addComponent(cboGio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(jLabel18)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(cboPhut, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                .addComponent(jLabel19))
                                            .addComponent(txtNgaydat, javax.swing.GroupLayout.PREFERRED_SIZE, 406, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                    .addComponent(jSeparator2, javax.swing.GroupLayout.DEFAULT_SIZE, 606, Short.MAX_VALUE))
                                .addContainerGap())
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                .addComponent(btnDatLich)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(btnThayDoiLich)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnHuyLich)
                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jLabel7)
                        .addGap(226, 226, 226))))
        );

        jPanel3Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {btnHuyChon, btnKT, btnThemMoi});

        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel3Layout.createSequentialGroup()
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel8)
                            .addComponent(txtTimBanDat, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel9)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED))
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel7)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 28, Short.MAX_VALUE)))
                .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 493, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel3Layout.createSequentialGroup()
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel11)
                            .addComponent(txtTen, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnThemMoi))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel12)
                            .addComponent(txtSDT, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnKT))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel13)
                            .addComponent(txtEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(btnHuyChon))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel14)
                            .addComponent(txtNgaySinh, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(21, 21, 21)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel15)
                            .addComponent(rdoNam)
                            .addComponent(rdoNu))
                        .addGap(18, 18, 18)
                        .addComponent(jSeparator1, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel20)
                            .addComponent(cboTangDB, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(13, 13, 13)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel10)
                            .addComponent(cboBan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel16)
                            .addComponent(txtNgaydat, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel17)
                            .addComponent(cboPhut, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                .addComponent(cboGio, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(jLabel18)
                                .addComponent(jLabel19)))
                        .addGap(18, 18, 18)
                        .addComponent(jSeparator2, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(btnDatLich)
                            .addComponent(btnHuyLich)
                            .addComponent(btnThayDoiLich))))
                .addContainerGap())
        );

        tabs.addTab("Đặt bàn", jPanel3);

        cboTangQL.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));
        cboTangQL.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboTangQLItemStateChanged(evt);
            }
        });

        jLabel21.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel21.setText("Tầng:");
        jLabel21.setToolTipText("");

        jLabel22.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel22.setForeground(new java.awt.Color(0, 51, 153));
        jLabel22.setText("Danh sách bàn:");

        tblQL.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        tblQL.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tblQLMouseClicked(evt);
            }
        });
        jScrollPane5.setViewportView(tblQL);

        jLabel23.setFont(new java.awt.Font("Tahoma", 1, 36)); // NOI18N
        jLabel23.setForeground(new java.awt.Color(0, 51, 153));
        jLabel23.setText("QUẢN LÝ BÀN");

        jLabel24.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel24.setText("Mã bàn:");

        txtMaBan.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N

        jLabel25.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel25.setText("Tên bàn:");

        txtTenBan.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N

        jLabel26.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jLabel26.setText("Tầng:");

        txtTang.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N

        btnThemBan.setText("Thêm bàn");
        btnThemBan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnThemBanActionPerformed(evt);
            }
        });

        btnSuaBan.setText("Sửa bàn");
        btnSuaBan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSuaBanActionPerformed(evt);
            }
        });

        btnXoaBan.setText("Xóa bàn");
        btnXoaBan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnXoaBanActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
        jPanel5.setLayout(jPanel5Layout);
        jPanel5Layout.setHorizontalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel5Layout.createSequentialGroup()
                                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel25)
                                    .addComponent(jLabel24)
                                    .addComponent(jLabel26))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(txtTenBan)
                                    .addComponent(txtMaBan)
                                    .addGroup(jPanel5Layout.createSequentialGroup()
                                        .addComponent(txtTang, javax.swing.GroupLayout.PREFERRED_SIZE, 97, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addGap(0, 0, Short.MAX_VALUE))))
                            .addComponent(jSeparator3)
                            .addGroup(jPanel5Layout.createSequentialGroup()
                                .addComponent(btnThemBan)
                                .addGap(18, 18, 18)
                                .addComponent(btnSuaBan)
                                .addGap(18, 18, 18)
                                .addComponent(btnXoaBan)
                                .addGap(0, 0, Short.MAX_VALUE)))
                        .addContainerGap())
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel5Layout.createSequentialGroup()
                                .addComponent(jLabel21)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(cboTangQL, javax.swing.GroupLayout.PREFERRED_SIZE, 406, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(jLabel22))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 207, Short.MAX_VALUE)
                        .addComponent(jLabel23)
                        .addGap(166, 166, 166))))
        );
        jPanel5Layout.setVerticalGroup(
            jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel5Layout.createSequentialGroup()
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel21)
                            .addComponent(cboTangQL, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel22)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED))
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jLabel23)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED, 29, Short.MAX_VALUE)))
                .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane5, javax.swing.GroupLayout.PREFERRED_SIZE, 492, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel5Layout.createSequentialGroup()
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel24)
                            .addComponent(txtMaBan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel25)
                            .addComponent(txtTenBan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel26)
                            .addComponent(txtTang, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jSeparator3, javax.swing.GroupLayout.PREFERRED_SIZE, 10, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(btnThemBan)
                            .addComponent(btnSuaBan)
                            .addComponent(btnXoaBan))))
                .addContainerGap())
        );

        tabs.addTab("Quản lý bàn", jPanel5);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(tabs, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(tabs, javax.swing.GroupLayout.Alignment.TRAILING)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnSoLuongActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSoLuongActionPerformed
        if (tblSP.getSelectedRow() >= 0) {
            chinhSua();
        } else {
            MsgBox.alert(this, "Vui lòng chọn sản phẩm!");
        }
    }//GEN-LAST:event_btnSoLuongActionPerformed

    private void btnHuyMonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnHuyMonActionPerformed
        if (tblSP.getSelectedRow() >= 0) {
            huyMon();
        } else {
            MsgBox.alert(this, "Vui lòng chọn sản phẩm!");
        }
    }//GEN-LAST:event_btnHuyMonActionPerformed

    private void btnLuuLaiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLuuLaiActionPerformed
        save();
    }//GEN-LAST:event_btnLuuLaiActionPerformed

    private void btnThemVaoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThemVaoActionPerformed
        if (tblDS.getSelectedRow() >= 0) {
            themVao();
            updateStatus();
        } else {
            MsgBox.alert(this, "Vui lòng chọn sản phẩm!");
        }
    }//GEN-LAST:event_btnThemVaoActionPerformed

    private void txtTimKiemTTKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtTimKiemTTKeyTyped
        // TODO add your handling code here:
    }//GEN-LAST:event_txtTimKiemTTKeyTyped

    private void txtTimKiemTTKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtTimKiemTTKeyReleased
        fillTableDS();
    }//GEN-LAST:event_txtTimKiemTTKeyReleased

    private void cboLoaiItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboLoaiItemStateChanged
        if (cboLoai.getItemCount() > 1) {
            fillTableDS();
        }
    }//GEN-LAST:event_cboLoaiItemStateChanged

    private void btn12MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn12MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn12.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn12.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn12);
    }//GEN-LAST:event_btn12MouseClicked

    private void btn11MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn11MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn11.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn11.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn11);
    }//GEN-LAST:event_btn11MouseClicked

    private void btn10MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn10MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn10.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn10.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn10);
    }//GEN-LAST:event_btn10MouseClicked

    private void btn9MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn9MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn9.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn9.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn9);
    }//GEN-LAST:event_btn9MouseClicked

    private void btn8MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn8MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn8.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn8.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn8);
    }//GEN-LAST:event_btn8MouseClicked

    private void btn7MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn7MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn7.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn7.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn7);
    }//GEN-LAST:event_btn7MouseClicked

    private void btn6MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn6MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn6.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn6.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn6);
    }//GEN-LAST:event_btn6MouseClicked

    private void btn5MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn5MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn5.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn5.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn5);
    }//GEN-LAST:event_btn5MouseClicked

    private void btn4MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn4MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn4.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn4.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn4);
    }//GEN-LAST:event_btn4MouseClicked

    private void btn3MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn3MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn3.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn3.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn3);
    }//GEN-LAST:event_btn3MouseClicked

    private void btn2MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn2MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn2.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn2.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn2);

    }//GEN-LAST:event_btn2MouseClicked

    private void btnNextActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNextActionPerformed
        pageIndexTB++;
        fillTable();
    }//GEN-LAST:event_btnNextActionPerformed

    private void btnPreActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPreActionPerformed
        pageIndexTB--;
        fillTable();
    }//GEN-LAST:event_btnPreActionPerformed

    private void rdoCoKhachMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_rdoCoKhachMouseClicked
        pageIndexTB = 0;
        fillTable();
    }//GEN-LAST:event_rdoCoKhachMouseClicked

    private void rdoTrongMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_rdoTrongMouseClicked
        pageIndexTB = 0;
        fillTable();
    }//GEN-LAST:event_rdoTrongMouseClicked

    private void rdoALLMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_rdoALLMouseClicked
        pageIndexTB = 0;
        fillTable();
    }//GEN-LAST:event_rdoALLMouseClicked

    private void cboTangItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboTangItemStateChanged
        if (cboTang.getItemCount() > 1) {
            pageIndexTB = 0;
            fillTable();
        }
    }//GEN-LAST:event_cboTangItemStateChanged

    private void txtTimKiemKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtTimKiemKeyReleased
        pageIndexTB = 0;
        fillTable();
    }//GEN-LAST:event_txtTimKiemKeyReleased

    private void btnChuyenBanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnChuyenBanActionPerformed
        if (!checkSave()) {
            chuyenBan();
        } else {
            MsgBox.alert(this, "Vui lòng lưu lại thay đổi trước khi chuyển bàn!");
        }
    }//GEN-LAST:event_btnChuyenBanActionPerformed

    private void btnXacNhanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnXacNhanActionPerformed
        xacNhan();
    }//GEN-LAST:event_btnXacNhanActionPerformed

    private void btnHuyActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnHuyActionPerformed
        huyChuyenBan();
    }//GEN-LAST:event_btnHuyActionPerformed

    private void btnHoanThanhActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnHoanThanhActionPerformed
        if (!checkSave()) {
            hoanThanh();
        } else {
            MsgBox.alert(this, "Vui lòng lưu lại thay đổi trước khi hoàn thành!");
        }
    }//GEN-LAST:event_btnHoanThanhActionPerformed

    private void btnThanhToanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThanhToanActionPerformed
        if (!checkSave()) {
            new ThanhToanFrame(lblMaBan.getText()).setVisible(true);
            dispose();
        } else {
            MsgBox.alert(this, "Vui lòng lưu lại thay đổi trước khi thanh toán!");
        }
    }//GEN-LAST:event_btnThanhToanActionPerformed

    private void btnThemMoiActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThemMoiActionPerformed
        themMoi();
    }//GEN-LAST:event_btnThemMoiActionPerformed

    private void btnKTActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnKTActionPerformed
        kiemTra();
    }//GEN-LAST:event_btnKTActionPerformed

    private void btnHuyChonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnHuyChonActionPerformed
        huyChon();

    }//GEN-LAST:event_btnHuyChonActionPerformed

    private void cboTangDBItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboTangDBItemStateChanged
        if (cboTangDB.getItemCount() > 1) {
            fillCboBan();
        }
    }//GEN-LAST:event_cboTangDBItemStateChanged

    private void txtTimBanDatKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtTimBanDatKeyReleased
        fillTableDB();
    }//GEN-LAST:event_txtTimBanDatKeyReleased

    private void tblDBMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblDBMouseClicked
        if (evt.getClickCount() == 2) {
            setFormDB(new BanDatDAO().selectByID(lstDB.get(tblDB.getSelectedRow()).getMaBan(), lstDB.get(tblDB.getSelectedRow()).getGioDat()));
            btnDatLich.setEnabled(false);
            tblDB.setEnabled(false);
            clickdatBan = true;
        }
    }//GEN-LAST:event_tblDBMouseClicked

    private void btnDatLichActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDatLichActionPerformed
        datLich();
    }//GEN-LAST:event_btnDatLichActionPerformed

    private void btnThayDoiLichActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThayDoiLichActionPerformed
        thayDoiLich();
    }//GEN-LAST:event_btnThayDoiLichActionPerformed

    private void btnHuyLichActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnHuyLichActionPerformed
        huyLich();
    }//GEN-LAST:event_btnHuyLichActionPerformed

    private void cboTangQLItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboTangQLItemStateChanged
        if (cboTangQL.getItemCount() > 1) {
            fillTableQL();
        }
    }//GEN-LAST:event_cboTangQLItemStateChanged

    private void tblQLMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tblQLMouseClicked
        if (evt.getClickCount() == 2) {
            setFormQL(new BanDAO().selectById(tblQL.getValueAt(tblQL.getSelectedRow(), 0).toString()));
            updateStatusQL();
        }
    }//GEN-LAST:event_tblQLMouseClicked

    private void btnThemBanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnThemBanActionPerformed
        themBan();
    }//GEN-LAST:event_btnThemBanActionPerformed

    private void btnSuaBanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSuaBanActionPerformed
        suaBan();
    }//GEN-LAST:event_btnSuaBanActionPerformed

    private void btnXoaBanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnXoaBanActionPerformed
        xoaBan();
    }//GEN-LAST:event_btnXoaBanActionPerformed

    private void btn1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btn1MouseClicked
        if (evt.getClickCount() == 2 && !btnXacNhan.isVisible()) {
            lblMaBan.setText(btn1.getToolTipText());
            fillTableSP(new BanChoDAO().selectByBan(btn1.getToolTipText()));
            tabs.setSelectedIndex(1);
        }
        setBorder(btn1);
    }//GEN-LAST:event_btn1MouseClicked
    void themBan() {
        if (checkValidateQL()) {
            new BanDAO().insert(getFormQL());
            changeTable();
            MsgBox.alert(this, "Thêm bàn thành công");
        }
    }

    void suaBan() {
        if (checkValidateQL()) {
            new BanDAO().update(getFormQL());
            changeTable();
            MsgBox.alert(this, "Sửa bàn thành công");
        }
    }

    void xoaBan() {
        if (MsgBox.confirm(this, "Bạn có chắc chắn muốn xóa bàn này?")) {
            if (new BanDAO().selectById(txtMaBan.getText()).isSanSang() == false) {
                MsgBox.alert(this, "Bạn không thể xóa bàn đang có khách?");
                return;
            } else {
                new BanDAO().delete(txtMaBan.getText());
                changeTable();
                MsgBox.alert(this, "Xóa bàn thành công");
            }

        }
    }

    void changeTable() {
        fillCboTable();
        fillCboTangDB();
        fillCboTangQL();
        fillCboBan();
        fillTable();
        fillTableQL();
        defaultFormQL();
        updateStatusQL();
    }

    void datLich() {
        if (checkDatBan()) {
            new BanDatDAO().insert(getFormDB());
            MsgBox.alert(this, "Đặt lịch thành công!");
            fillTableDB();
            resetFormDB();
        }
    }

    void thayDoiLich() {
        if (checkDatBan()) {
            new BanDatDAO().updateDB(getFormDB(), lstDB.get(tblDB.getSelectedRow()).getMaBan(), lstDB.get(tblDB.getSelectedRow()).getGioDat());
            MsgBox.alert(this, "Thay đổi lịch thành công!");
            fillTableDB();
            resetFormDB();
        }
    }

    void huyLich() {
        if (MsgBox.confirm(this, "Bạn có chắc chắn muốn xóa lịch đặt này?")) {
            new BanDatDAO().deleteDB(lstDB.get(tblDB.getSelectedRow()).getMaBan(), lstDB.get(tblDB.getSelectedRow()).getGioDat());
            MsgBox.alert(this, "Xóa lịch đặt thành công!");
            fillTableDB();
            resetFormDB();
        }
    }

    void resetFormDB() {
        setStatusFormDB(true);
        txtTen.setText("");
        txtEmail.setText("");
        txtNgaySinh.setDate(null);
        rdoNam.setSelected(true);
        rdoNu.setSelected(false);
        txtSDT.setText("");
        cboTangDB.setSelectedIndex(0);
        cboBan.setSelectedIndex(0);
        cboPhut.setSelectedIndex(0);
        cboGio.setSelectedIndex(0);
        txtNgaydat.setDate(null);
        tblDB.setEnabled(true);
        clickdatBan = false;
    }

    Timer t;

//    void startDatLich() {
//        t = new Timer(60000, new ActionListener() {
//            @Override
//            public void actionPerformed(ActionEvent ae) {
//                String gioDat = Xdate.toString(new Date(), "hh:mm - EE, dd/MM/yyyy");
//                int truoc = (Integer.parseInt(gioDat.substring(0, 2)) + 1);
//                String truocGioDat = (truoc < 10 ? "0" + truoc : truoc) + gioDat.substring(2);
//                BanDat bdt = new BanDatDAO().selectByGioDat(truocGioDat);
//                if (bdt != null) {
//                    Xmail.sendLichDat(new KhachHangDao().selectById(bdt.getMaKH()).getEmail(), new KhachHangDao().selectById(bdt.getMaKH()).getTenKH(), truocGioDat, new BanDAO().selectById(bdt.getMaBan()).getTenBan());
//                }
//                BanDat bd = new BanDatDAO().selectByGioDat(gioDat);
//                if (bd != null) {
//                    BanCho bc = new BanCho(bd.getMaBan(), "PDB", 1, new SanPhamDAO().selectById("PDB").getDonGia(), bd.getGioDat(), bd.getMaNV(), true);
//                    new BanChoDAO().insert(bc);
//                    fillTable();
//                }
//            }
//        });
//        t.start();
//    }
    void huyChon() {
        setStatusFormDB(true);
        txtTen.setText("");
        txtEmail.setText("");
        txtNgaySinh.setDate(null);
        rdoNam.setSelected(true);
        rdoNu.setSelected(false);
        txtSDT.setText("");
    }

    void fillCboBan() {
        lstALL = new BanDAO().selectALL(getCboTangDB(), "1");
        cboBan.removeAllItems();
        for (Ban b : lstALL) {
            cboBan.addItem(b.getTenBan());
        }
    }

    void fillTableDB() {
        lstDB = new BanDatDAO().selectALL();
        modelDB.setRowCount(0);
        for (BanDat banDat : lstDB) {
            if (new BanDAO().selectById(banDat.getMaBan()).getTenBan().toUpperCase().contains(txtTimBanDat.getText().toUpperCase())
                    || new KhachHangDao().selectById(banDat.getMaKH()).getTenKH().toUpperCase().contains(txtTimBanDat.getText().toUpperCase())) {
                modelDB.addRow(new Object[]{
                    new BanDAO().selectById(banDat.getMaBan()).getTenBan(),
                    new KhachHangDao().selectById(banDat.getMaKH()).getTenKH(),
                    banDat.getGioDat(),
                    new NhanVienDAO().selectById(banDat.getMaNV()).getTenNV()
                });
            }
        }
    }

    void setFormDB(BanDat ban) {
        KhachHang kh = new KhachHangDao().selectById(ban.getMaKH());
        Ban b = new BanDAO().selectById(ban.getMaBan());
        txtTen.setText(kh.getTenKH());
        txtNgaySinh.setDate(kh.getNgaysinh());
        txtSDT.setText(kh.getSDT());
        txtEmail.setText(kh.getEmail());
        rdoNam.setSelected(kh.isGioiTinh());
        rdoNu.setSelected(!kh.isGioiTinh());
        setStatusFormDB(false);
        cboTangDB.setSelectedItem(b.getViTri());
        cboBan.setSelectedItem(b.getTenBan());
        txtNgaydat.setDate(Xdate.toDate(ban.getGioDat().substring(ban.getGioDat().indexOf(", ") + 2), "dd/MM/yyyy"));
        cboGio.setSelectedItem(ban.getGioDat().substring(0, 2));
        cboPhut.setSelectedItem(ban.getGioDat().substring(3, 5));
    }

    BanDat getFormDB() {
        KhachHang kh = new KhachHangDao().selectSDT(txtSDT.getText());
        String gioDat = cboGio.getSelectedItem().toString() + ":" + cboPhut.getSelectedItem().toString() + " - " + Xdate.toString(txtNgaydat.getDate(), "EE, dd/MM/yyyy");
        return new BanDat(lstALL.get(cboBan.getSelectedIndex()).getMaBan(), gioDat, kh.getMaKH(), Auth.user.getMaNV());
    }

    void fillCboGD() {
        cboGio.removeAllItems();
        cboPhut.removeAllItems();
        for (int i = 7; i < 23; i++) {
            if (i >= 10) {
                cboGio.addItem(i + "");
            } else {
                cboGio.addItem("0" + i);
            }
        }
        for (int i = 0; i < 60; i++) {
            if (i >= 10) {
                cboPhut.addItem(i + "");
            } else {
                cboPhut.addItem("0" + i);
            }
        }
    }

    boolean checkValidate() {
        String pEmail = "^.+@fpt.edu.vn$";
        String pSDT = "^0[0-9]{9}$";
        if (txtTen.getText().length() == 0) {
            MsgBox.alert(this, "Vui lòng nhập tên khách hàng!");
            txtTen.requestFocus();
            return false;
        } else if (txtSDT.getText().length() == 0) {
            MsgBox.alert(this, "Vui lòng nhập SDT khách hàng!");
            txtSDT.requestFocus();
            return false;
        } else if (!txtSDT.getText().matches(pSDT)) {
            MsgBox.alert(this, "SDT không đúng định dạng!");
            txtSDT.requestFocus();
            return false;
        } else if (txtEmail.getText().length() == 0) {
            MsgBox.alert(this, "Vui lòng nhập email khách hàng!");
            txtEmail.requestFocus();
            return false;
        } else if (!txtEmail.getText().matches(pEmail)) {
            MsgBox.alert(this, "Email không đúng định dạng!");
            txtEmail.requestFocus();
            return false;
        } else if (txtNgaySinh.getDate() == null) {
            MsgBox.alert(this, "Vui lòng nhập ngày sinh khách hàng!");
            return false;
        }
        return true;
    }

    boolean checkDatBan() {
        if (txtNgaydat.getDate() == null) {
            MsgBox.alert(this, "Vui lòng chọn ngày đặt!");
            return false;
        }
        String gioDat = cboGio.getSelectedItem().toString() + ":" + cboPhut.getSelectedItem().toString() + " - " + Xdate.toString(txtNgaydat.getDate(), "EE, dd/MM/yyyy");
        if (Xdate.toDate(gioDat, "hh:mm - EE, dd/MM/yyyy").before(Xdate.toDate(Xdate.toString(new Date(), "hh:mm - EE, dd/MM/yyyy"), "hh:mm - EE, dd/MM/yyyy")) && !gioDat.substring(0, 2).equals("12")) {
            MsgBox.alert(this, "Thời gian đặt phải sau ngày giờ hiện tại!");
            return false;
        }
        List<BanDat> lst = new BanDatDAO().selectByDay(lstALL.get(cboBan.getSelectedIndex()).getMaBan(), Xdate.toString(txtNgaydat.getDate(), "EE, dd/MM/yyyy"));
        if (lst != null) {
            int truoc = (Integer.parseInt(gioDat.substring(0, 2)) - 1);
            int sau = (Integer.parseInt(gioDat.substring(0, 2)) + 1);
            String truocGioDat = (truoc < 10 ? "0" + truoc : truoc) + gioDat.substring(2);
            String sauGioDat = (sau < 10 ? "0" + sau : sau) + gioDat.substring(2);
            if (!clickdatBan) {
                for (BanDat bd : lst) {

                    if (Xdate.toDate(bd.getGioDat(), "hh:mm - EE, dd/MM/yyyy").after(Xdate.toDate(truocGioDat, "hh:mm - EE, dd/MM/yyyy"))
                            && Xdate.toDate(bd.getGioDat(), "hh:mm - EE, dd/MM/yyyy").before(Xdate.toDate(sauGioDat, "hh:mm - EE, dd/MM/yyyy"))) {
                        MsgBox.alert(this, "Bàn này đã có lịch đặt vào lúc " + bd.getGioDat() + " vui lòng chọn lịch đặt khác!");
                        return false;
                    }
                }
            } else {
                System.out.println("đã click");
                BanDat b = lstDB.get(tblDB.getSelectedRow());
                for (BanDat bd : lst) {
                    if (!(b.getMaBan().equals(bd.getMaBan()) && b.getGioDat().equals(bd.getGioDat()))) {
                        if (Xdate.toDate(bd.getGioDat(), "hh:mm - EE, dd/MM/yyyy").after(Xdate.toDate(truocGioDat, "hh:mm - EE, dd/MM/yyyy"))
                                && Xdate.toDate(bd.getGioDat(), "hh:mm - EE, dd/MM/yyyy").before(Xdate.toDate(sauGioDat, "hh:mm - EE, dd/MM/yyyy"))) {
                            MsgBox.alert(this, "Bàn này đã có lịch đặt vào lúc " + bd.getGioDat() + " vui lòng chọn lịch đặt khác!");
                            return false;
                        }
                    }
                }
            }
        }
        return true;
    }

    void themMoi() {
        if (checkValidate()) {
            KhachHang kh = new KhachHang(txtTen.getText(), txtSDT.getText(), txtEmail.getText(), txtNgaySinh.getDate(), rdoNam.isSelected(), Auth.user.getMaNV(), true);
            new KhachHangDao().insertNoID(kh);
            MsgBox.alert(this, "Thêm mới thành công");
        }
    }

    void kiemTra() {
        if (txtSDT.getText().length() == 0) {
            MsgBox.alert(this, "Vui lòng nhập số điện thoại!");
        } else {
            KhachHang ks = new KhachHangDao().selectSDT(txtSDT.getText());
            if (!(ks == null)) {
                txtTen.setText(ks.getTenKH());
                txtEmail.setText(ks.getEmail());
                txtNgaySinh.setDate(ks.getNgaysinh());
                rdoNam.setSelected(ks.isGioiTinh());
                rdoNu.setSelected(!ks.isGioiTinh());
                setStatusFormDB(false);
                if (clickdatBan) {
                    btnDatLich.setEnabled(false);
                } else {
                    btnThayDoiLich.setEnabled(false);
                    btnHuyLich.setEnabled(false);
                }
            } else {
                MsgBox.alert(this, "Số điện thoại không tồn tại!");
            }
        }
    }

    void setStatusFormDB(boolean done) {
        txtSDT.setEnabled(done);
        txtEmail.setEnabled(done);
        txtTen.setEnabled(done);
        txtNgaySinh.setEnabled(done);
        rdoNam.setEnabled(done);
        rdoNu.setEnabled(done);
        btnThemMoi.setEnabled(done);
        btnKT.setEnabled(done);
        btnHuyChon.setEnabled(!done);
        rdoNam.setSelected(done);
        cboTangDB.setEnabled(!done);
        cboBan.setEnabled(!done);
        btnDatLich.setEnabled(!done);
        btnThayDoiLich.setEnabled(!done);
        btnHuyLich.setEnabled(!done);
        txtNgaydat.setEnabled(!done);
        cboGio.setEnabled(!done);
        cboPhut.setEnabled(!done);
    }

    void updateStatus() {
        boolean check = tblSP.getRowCount() > 0;
        boolean click = lblMaBan.getText().equalsIgnoreCase("CHƯA CHỌN BÀN");

        btnThemVao.setEnabled(!click);
        btnHuyMon.setEnabled(check);
        btnSoLuong.setEnabled(check);
        btnLuuLai.setEnabled(check);
        btnChuyenBan.setEnabled(check);
        btnThanhToan.setEnabled(check);
        btnHoanThanh.setEnabled(check);
        btnLuuLai.setEnabled(huyMon);
    }

    boolean checkSave() {
        if (new BanDAO().selectCount(lblMaBan.getText()) < tblSP.getRowCount() || checkSave) {
            return true;
        }
        return false;
    }

    void huyChuyenBan() {
        if (MsgBox.confirm(this, "Bạn có chắc chắn muốn hủy chuyển bàn?")) {
            btnHuy.setVisible(false);
            btnXacNhan.setVisible(false);
        }
    }

    void setBorder(JLabel lb) {
        Component cm[] = pnlBan.getComponents();
        for (int i = 0; i < cm.length; i++) {
            ((JLabel) cm[i]).setBorder(null);
        }
        lb.setBorder(BorderFactory.createLineBorder(Color.BLACK, 3));
    }

    void chuyenBan() {
        btnXacNhan.setVisible(true);
        btnHuy.setVisible(true);
        tabs.setSelectedIndex(0);
    }

    void fillTableSP(List<BanCho> lst) {
        huyMon = true;
        modelSP.setRowCount(0);
        for (BanCho bc : lst) {
            SanPham sp = new SanPhamDAO().selectById(bc.getMaSP());
            modelSP.addRow(new Object[]{
                bc.getMaSP(),
                sp.getTenSanPham(),
                bc.getSoLuong(),
                sp.getDonViTinh(),
                Xcurrency.toCurrency(bc.getGia()),
                Xcurrency.toCurrency(bc.getGia() * bc.getSoLuong()),
                bc.isHoanThanh() ? "Đã hoàn thành" : "Đang làm"
            });
        }
        fillTableDS();
    }

    void init() {
        setLocationRelativeTo(null);
        setResizable(false);
        setDefaultCloseOperation(2);
        setTitle("QUẢN LÝ BÀN");
        jPanel4.setBackground(new Color(Integer.parseInt(Auth.user.getMauNen(), 16)));
        daoBan = new BanDAO();
        prepareGUI();

    }

    void prepareGUI() {
        fillCboTable();
        fillTable();
        fillCboLoai();
        setTableSP();
        setTableDS();
        fillTableDS();
        defaultForm();
        resetFormDB();
        fillCboTangDB();
        fillCboBan();
        fillCboGD();
        setTableDB();
        fillTableDB();
//        startDatLich();
        setTableQL();
        fillCboTangQL();
        defaultFormQL();
        fillTableQL();
    }

    void setTableSP() {
        String h[] = {"Mã sản phẩm", "Tên sản phẩm", "Số lượng", "ĐVT", "Đơn giá", "Tổng tiền", "Trạng thái"};
        modelSP = new DefaultTableModel(h, 0) {
            @Override
            public boolean isCellEditable(int i, int i1) {
                return false;
            }
        };
        tblSP.setModel(modelSP);
    }

    void setTableQL() {
        String h[] = {"Mã bàn", "Tên bàn", "Tầng", "Trạng thái"};
        modelQL = new DefaultTableModel(h, 0) {
            @Override
            public boolean isCellEditable(int i, int i1) {
                return false;
            }
        };
        tblQL.setModel(modelQL);
    }

    void fillTableQL() {
        updateStatusTable();
        List<Ban> lst = daoBan.selectALL(getCboTangQL(), "1");
        modelQL.setRowCount(0);
        for (Ban ban : lst) {
            modelQL.addRow(new Object[]{ban.getMaBan(), ban.getTenBan(), ban.getViTri(), ban.isSanSang() ? "Còn trống" : "Có khách"});
        }
    }

    void save() {
        try {
            new BanChoDAO().delete(lblMaBan.getText());
            for (int i = 0; i < tblSP.getRowCount(); i++) {
                BanCho bc = new BanCho(lblMaBan.getText(),
                        tblSP.getValueAt(i, 0).toString(),
                        Xcurrency.toInt(tblSP.getValueAt(i, 2).toString()),
                        Xcurrency.toInt(tblSP.getValueAt(i, 4).toString()),
                        Xdate.toString(new Date(), "hh:mm:ss - EE, dd/MM/yyyy"),
                        Auth.user.getMaNV(),
                        tblSP.getValueAt(i, 6).toString().equalsIgnoreCase("Đã hoàn thành"));
                new BanChoDAO().insert(bc);
                checkSave = false;
            }
            MsgBox.alert(this, "Cập nhật dữ liệu thành công");
            fillTable();
            defaultForm();
            tabs.setSelectedIndex(0);
        } catch (Exception e) {
            MsgBox.alert(this, "Cập nhật dữ liệu thất bại");
            e.printStackTrace();
        }
    }

    void updateStatusTable() {
        List<String> str = new BanChoDAO().selectStatusTable();
        for (String x : str) {
            Ban b = new BanDAO().selectById(x);
            b.setSanSang(false);
            new BanDAO().update(b);
        }
    }

    String getCboLoai() {
        if (cboLoai.getSelectedIndex() == 0) {
            return "";
        } else {
            return lstLSP.get(cboLoai.getSelectedIndex() - 1).getMaLoaiSP();
        }
    }

    void fillTableDS() {
        List<SanPham> lst = new SanPhamDAO().selectByLoai("%" + getCboLoai() + "%");
        modelDS.setRowCount(0);
        for (SanPham sp : lst) {
            if ((sp.getMaSP().toUpperCase().contains(txtTimKiemTT.getText().trim().toUpperCase()) || sp.getTenSanPham().toUpperCase().contains(txtTimKiemTT.getText().toUpperCase().trim())) && checkSP(sp.getMaSP())) {;
                modelDS.addRow(new Object[]{sp.getMaSP(), sp.getTenSanPham(), sp.getDonViTinh(), Xcurrency.toCurrency(sp.getDonGia())});
            }
        }
        updateStatus();
    }

    void huyMon() {
        if (MsgBox.confirm(this, "Bạn có chắc chắn muốn hủy món này?")) {
            if (!tblSP.getValueAt(tblSP.getSelectedRow(), 6).equals("Đã hoàn thành")) {
                huyMon = true;
                checkSave = true;
                modelSP.removeRow(tblSP.getSelectedRow());
                fillTableDS();
            } else {
                MsgBox.alert(this, "Món ăn đã hoàn thành không thể hủy món");
            }
        }
    }

    void defaultForm() {
        modelSP.setRowCount(0);
        lblMaBan.setText("CHƯA CHỌN BÀN");
        huyMon = false;
        btnXacNhan.setVisible(false);
        btnHuy.setVisible(false);
        checkSave = false;
        updateStatus();
    }

    boolean checkSP(String maSP) {
        for (int i = 0; i < tblSP.getRowCount(); i++) {
            if (maSP.equals(tblSP.getValueAt(i, 0))) {
                return false;
            }
        }
        return true;
    }

    void fillCboTangDB() {
        List<String> lst = daoBan.selectTang();
        cboTangDB.removeAllItems();
        cboTangDB.addItem("Tất cả");
        lst.forEach((str) -> {
            cboTangDB.addItem(str);
        });

    }

    void fillCboTangQL() {
        List<String> lst = daoBan.selectTang();
        cboTangQL.removeAllItems();
        cboTangQL.addItem("Tất cả");
        lst.forEach((str) -> {
            cboTangQL.addItem(str);
        });

    }

    void setTableDS() {
        String h[] = {"Mã sản phẩm", "Tên sản phẩm", "ĐVT", "Đơn giá"};
        modelDS = new DefaultTableModel(h, 0) {
            @Override
            public boolean isCellEditable(int i, int i1) {
                return false;
            }

        };
        tblDS.setModel(modelDS);
    }

    void setTableDB() {
        String h[] = {"Tên bàn", "Tên khách hàng", "Giờ đặt", "Nhân viên đặt"};
        modelDB = new DefaultTableModel(h, 0) {
            @Override
            public boolean isCellEditable(int i, int i1) {
                return false;
            }

        };
        tblDB.setModel(modelDB);
    }

    void updateStatusPage() {
        boolean firstTB = pageIndexTB == 0;
        boolean lastTB = daoBan.selectPagingFull(1, getCboTable(), txtTimKiem.getText(), getRdoSatus(), pageIndexTB + 1).isEmpty();

        btnPre.setEnabled(!firstTB);
        btnNext.setEnabled(!lastTB);

    }

    void fillCboTable() {
        List<String> lst = daoBan.selectTang();
        cboTang.removeAllItems();
        cboTang.addItem("Tất cả");
        lst.forEach((str) -> {
            cboTang.addItem(str);
        });

    }

    void themVao() {
        String sl = MsgBox.promt(this, "Vui lòng nhập số lượng?");
        try {
            int x = Integer.parseInt(sl);
            int row = tblDS.getSelectedRow();
            modelSP.addRow(new Object[]{tblDS.getValueAt(row, 0), tblDS.getValueAt(row, 1), x, tblDS.getValueAt(row, 2), Xcurrency.toCurrency(Xcurrency.toInt(tblDS.getValueAt(row, 3).toString())), Xcurrency.toCurrency(Xcurrency.toInt(tblDS.getValueAt(row, 3).toString()) * x), "Đang làm"});
            modelDS.removeRow(row);
        } catch (Exception e) {
            MsgBox.alert(this, "Số lượng không đúng định dạng");
            e.printStackTrace();
        }
    }

    String getSelectedTable() {
        Component cm[] = pnlBan.getComponents();
        String tableName = null;
        for (int i = 0; i < cm.length; i++) {
            if (!(((JLabel) cm[i]).getBorder() == null)) {
                tableName = ((JLabel) cm[i]).getToolTipText();
            }
        }
        return tableName;
    }

    boolean checkTable(String maBan) {
        List<String> lst = new BanChoDAO().selectStatusTable();
        for (String str : lst) {
            if (str.equals(maBan)) {
                return false;
            }
        }
        return true;
    }

    void xacNhan() {
        if (checkTable(getSelectedTable())) {
            if (MsgBox.confirm(this, "Bạn có chắc chắn muốn chuyển từ bàn " + lblMaBan.getText() + " đến bàn " + getSelectedTable() + " không?")) {
                new BanChoDAO().chuyenBan(getSelectedTable(), new BanChoDAO().selectByBan(lblMaBan.getText()));
                fillTable();
                defaultForm();
                btnXacNhan.setVisible(false);
                MsgBox.alert(this, "Chuyển bàn thành công!");
            }
        } else {
            MsgBox.alert(this, "Không thể chuyển đến bàn này!!");
        }
    }

    void chinhSua() {
        String sl = MsgBox.promt(this, "Vui lòng nhập số lượng?");
        try {
            int slt = Integer.parseInt(sl);
            int row = tblSP.getSelectedRow();
            if (slt > Integer.parseInt(tblSP.getValueAt(row, 2).toString())) {
                tblSP.setValueAt("Đang làm", row, 6);
            } else {
                tblSP.setValueAt("Đã hoàn thành", row, 6);
            }
            int tongTien = Xcurrency.toInt(tblSP.getValueAt(row, 5).toString()) / Integer.parseInt(tblSP.getValueAt(row, 2).toString()) * slt;
            tblSP.setValueAt(Xcurrency.toCurrency(tongTien), row, 5);
            tblSP.setValueAt(slt, row, 2);
            checkSave = true;
            updateStatus();
        } catch (Exception e) {
            MsgBox.alert(this, "Số lượng không đúng định dạng");
        }
    }

    void fillTable() {
        updateStatusTable();
        List<Ban> lst = daoBan.selectPagingFull(1, getCboTable(), txtTimKiem.getText().trim(), getRdoSatus(), pageIndexTB);
        Component cm[] = pnlBan.getComponents();
        for (int i = 0; i < cm.length - 1; i++) {
            try {
                ((JLabel) cm[i + 1]).setBorder(null);
                ((JLabel) cm[i + 1]).setVisible(true);
                ((JLabel) cm[i + 1]).setText(lst.get(i).getTenBan());
                ((JLabel) cm[i + 1]).setToolTipText(lst.get(i).getMaBan());
                if (!lst.get(i).isSanSang()) {
                    ((JLabel) cm[i + 1]).setBackground(new Color(244, 164, 96));
                } else {
                    ((JLabel) cm[i + 1]).setBackground(new Color(127, 255, 212));
                }
            } catch (Exception e) {
                ((JLabel) cm[i + 1]).setVisible(false);
            }
        }
        ((JLabel) cm[0]).setBackground(new Color(127, 255, 212));
        ((JLabel) cm[0]).setToolTipText("MV");
        lbTable.setText(pageIndexTB + 1 + "");
        updateStatusPage();
    }

    String getCboTable() {
        if (cboTang.getSelectedIndex() == 0) {
            return "";
        } else {
            return cboTang.getSelectedItem().toString();
        }
    }

    void hoanThanh() {
        if (MsgBox.confirm(this, "Xác nhận hoàn thành món?")) {
            BanCho bc = new BanChoDAO().selectByID(lblMaBan.getText(), tblSP.getValueAt(tblSP.getSelectedRow(), 0).toString());
            bc.setHoanThanh(true);
            new BanChoDAO().update(bc);
            tblSP.setValueAt("Đã hoàn thành", tblSP.getSelectedRow(), 6);
        }
    }

    String getCboTangDB() {
        if (cboTangDB.getSelectedIndex() == 0) {
            return "";
        } else {
            return cboTangDB.getSelectedItem().toString();
        }
    }

    String getCboTangQL() {
        if (cboTangQL.getSelectedIndex() == 0) {
            return "";
        } else {
            return cboTangQL.getSelectedItem().toString();
        }
    }

    String getRdoSatus() {
        if (rdoALL.isSelected()) {
            return "";
        } else if (rdoTrong.isSelected()) {
            return "1";
        } else if (rdoCoKhach.isSelected()) {
            return "0";
        }
        return null;
    }

    void defaultFormQL() {
        updateStatusQL();
        txtTenBan.setText("");
        txtMaBan.setText("");
        txtTang.setValue(0);
    }

    Ban getFormQL() {
        if (tblQL.getSelectedRow() >= 0) {
            Ban b = new BanDAO().selectById(txtMaBan.getText());
            b.setTenBan(txtTenBan.getText());
            b.setViTri(txtTang.getValue().toString());
            return b;
        } else {
            return new Ban(txtMaBan.getText(), txtTenBan.getText(), txtTang.getValue().toString(), true, true);
        }
    }

    void setFormQL(Ban ban) {
        txtMaBan.setText(ban.getMaBan());
        txtTenBan.setText(ban.getTenBan());
        txtTang.setValue(Integer.parseInt(ban.getViTri()));
    }

    boolean checkValidateQL() {
        if (txtMaBan.getText().length() == 0) {
            MsgBox.alert(this, "Vui lòng nhập mã bàn!");
            txtMaBan.requestFocus();
            return false;
        } else if (new BanDAO().selectById(txtMaBan.getText()) != null && tblQL.getSelectedRow() < 0) {
            MsgBox.alert(this, "Mã bàn đã tồn tại!");
            txtTenBan.requestFocus();
            return false;
        } else if (txtTenBan.getText().length() == 0) {
            MsgBox.alert(this, "Vui lòng nhập tên bàn!");
            txtTenBan.requestFocus();
            return false;
        }
        return true;
    }

    void updateStatusQL() {
        boolean row = tblQL.getSelectedRow() >= 0;
        btnThemBan.setEnabled(!row);
        btnSuaBan.setEnabled(row);
        btnXoaBan.setEnabled(row);
        txtMaBan.setEnabled(!row);
    }

    void fillCboLoai() {
        lstLSP = new LoaiSanPhamDAO().selectAll();
        cboLoai.removeAllItems();
        cboLoai.addItem("Tất cả");
        lstLSP.forEach(x -> {
            cboLoai.addItem(x.getTenLoaiSP());
        });
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;

                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(QuanLyBanFrame.class
                    .getName()).log(java.util.logging.Level.SEVERE, null, ex);

        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(QuanLyBanFrame.class
                    .getName()).log(java.util.logging.Level.SEVERE, null, ex);

        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(QuanLyBanFrame.class
                    .getName()).log(java.util.logging.Level.SEVERE, null, ex);

        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(QuanLyBanFrame.class
                    .getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new QuanLyBanFrame().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel btn1;
    private javax.swing.JLabel btn10;
    private javax.swing.JLabel btn11;
    private javax.swing.JLabel btn12;
    private javax.swing.JLabel btn2;
    private javax.swing.JLabel btn3;
    private javax.swing.JLabel btn4;
    private javax.swing.JLabel btn5;
    private javax.swing.JLabel btn6;
    private javax.swing.JLabel btn7;
    private javax.swing.JLabel btn8;
    private javax.swing.JLabel btn9;
    private javax.swing.JButton btnChuyenBan;
    private javax.swing.JButton btnDatLich;
    private javax.swing.JButton btnHoanThanh;
    private javax.swing.JButton btnHuy;
    private javax.swing.JButton btnHuyChon;
    private javax.swing.JButton btnHuyLich;
    private javax.swing.JButton btnHuyMon;
    private javax.swing.JButton btnKT;
    private javax.swing.JButton btnLuuLai;
    private javax.swing.JButton btnNext;
    private javax.swing.JButton btnPre;
    private javax.swing.JButton btnSoLuong;
    private javax.swing.JButton btnSuaBan;
    private javax.swing.JButton btnThanhToan;
    private javax.swing.JButton btnThayDoiLich;
    private javax.swing.JButton btnThemBan;
    private javax.swing.JButton btnThemMoi;
    private javax.swing.JButton btnThemVao;
    private javax.swing.JButton btnXacNhan;
    private javax.swing.JButton btnXoaBan;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.ButtonGroup buttonGroup2;
    private javax.swing.ButtonGroup buttonGroup3;
    private javax.swing.JComboBox<String> cboBan;
    private javax.swing.JComboBox<String> cboGio;
    private javax.swing.JComboBox<String> cboLoai;
    private javax.swing.JComboBox<String> cboPhut;
    private javax.swing.JComboBox<String> cboTang;
    private javax.swing.JComboBox<String> cboTangDB;
    private javax.swing.JComboBox<String> cboTangQL;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JSeparator jSeparator3;
    private javax.swing.JLabel lbTable;
    private javax.swing.JLabel lblMaBan;
    private javax.swing.JPanel pnlBan;
    private javax.swing.JRadioButton rdoALL;
    private javax.swing.JRadioButton rdoCoKhach;
    private javax.swing.JRadioButton rdoNam;
    private javax.swing.JRadioButton rdoNu;
    private javax.swing.JRadioButton rdoTrong;
    private javax.swing.JTabbedPane tabs;
    private javax.swing.JTable tblDB;
    private javax.swing.JTable tblDS;
    private javax.swing.JTable tblQL;
    private javax.swing.JTable tblSP;
    private javax.swing.JTextField txtEmail;
    private javax.swing.JTextField txtMaBan;
    private com.toedter.calendar.JDateChooser txtNgaySinh;
    private com.toedter.calendar.JDateChooser txtNgaydat;
    private javax.swing.JTextField txtSDT;
    private javax.swing.JSpinner txtTang;
    private javax.swing.JTextField txtTen;
    private javax.swing.JTextField txtTenBan;
    private javax.swing.JTextField txtTimBanDat;
    private javax.swing.JTextField txtTimKiem;
    private javax.swing.JTextField txtTimKiemTT;
    // End of variables declaration//GEN-END:variables
}
